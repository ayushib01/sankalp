
<link rel="stylesheet" href="../css/style.css" />
<script src="/socket.io/socket.io.js"></script>
<script src="https://kit.fontawesome.com/c939d0e917.js"></script>
<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
<script src="/js/scripts.js" defer></script>
     <script>
      const ROOM_ID = "<%= roomId %>"
      const senderName="<%=user.name%>"
   </script>
      <div class="main">
         <div class="main__left">
            <div class="main__videos">
               <div id="video-grid">
         
               </div>
            </div>
            <div class="main__controls">
               <div class="main__controls__block">
                  <div onclick="muteUnmute()" class="main__controls__button main__mute_button">
                     <i class="fas fa-microphone"></i>
                     <span>Mute</span>
                  </div>
                  <div onclick="playStop()" class="main__controls__button main__video_button" >
                     <i class="fas fa-video"></i>
                     <span>Stop Video</span>
                  </div>
               </div>
       
               <div class="main__controls__block">
                  <div class="main__controls__button">
                     <span class="leave_meeting" onclick="goBack();">Leave Meeting</span>
                  </div>
               </div>
            </div>
         </div>
         <div class="main__right">
            <div class="main__header">
               <h6>Chat</h6>
            </div>
            <div class="main__chat_window">
               <ul class="messages">
                  
               </ul>
   
            </div>
            <div class="main__message_container">
               <input id="chat_message" type="text" placeholder="Type message here...">
            </div>
         </div>
      </div>

<script>
  window.goBack = function (e){
    var defaultLocation = "http://www.localhost:3000.com";
    var oldHash = window.location.hash;

    history.back(); // Try to go back

    var newHash = window.location.hash;

    /* If the previous page hasn't been loaded in a given time (in this case
    * 1000ms) the user is redirected to the default location given above.
    * This enables you to redirect the user to another page.
    *
    * However, you should check whether there was a referrer to the current
    * site. This is a good indicator for a previous entry in the history
    * session.
    *
    * Also you should check whether the old location differs only in the hash,
    * e.g. /index.html#top --> /index.html# shouldn't redirect to the default
    * location.
    */

    if(
        newHash === oldHash &&
        (typeof(document.referrer) !== "string" || document.referrer  === "")
    ){
        window.setTimeout(function(){
            // redirect to default location
            window.location.href = defaultLocation;
        },1000); // set timeout in ms
    }
    if(e){
        if(e.preventDefault)
            e.preventDefault();
        if(e.preventPropagation)
            e.preventPropagation();
    }
    return false; // stop event propagation and browser default event
}
</script>
